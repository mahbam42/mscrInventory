{% extends "base.html" %}
{% block title %}Recipes{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">â˜• Recipe Dashboard</h2>
  <form method="get" class="mb-3 d-flex gap-2 align-items-center" id="recipes-filter">
    <label for="category" class="form-label mb-0">Category</label>
    <select name="category" id="category" class="form-select form-select-sm" onchange="this.form.submit()">
      <option value="">All</option>
      {% for c in categories %}
      {# c has keys: categories__id, categories__name #}
      <option value="{{ c.categories__id }}" {% if selected_category==c.categories__id|stringformat:"s" or
        selected_category==c.categories__name %} selected {% endif %}>
        {{ c.categories__name }}
      </option>
      {% endfor %}
    </select>
  </form>
  <div id="recipes-table-wrap"
    hx-get="{% url 'recipes_table_fragment' %}{% if selected_category %}?category={{ selected_category }}{% endif %}"
    hx-trigger="recipes:refresh from:body" hx-target="this" hx-swap="outerHTML">
    {% include "mscrInventory/recipes/_table.html" with products=products %}
  </div>
  
</div>

<!-- Global modal container -->
<div class="modal fade" id="globalModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content"></div>
  </div>
</div>
{% endblock %}
