<div class="modal-header">
  <h5 class="modal-title">Edit Recipe: {{ product.name }}</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>
<div class="modal-body">
  <form 
    hx-post="{% url 'save_recipe' product.id %}" 
    hx-target="#modal-body" 
    hx-swap="outerHTML"
  >
    <h6>Base Ingredients</h6>
    <div id="base-ingredients">
      {% for item in base_items %}
        <div class="mb-2">
          {{ item.ingredient.name }} â€”
          <input type="number" name="base_{{ item.id }}_quantity" value="{{ item.quantity }}" step="0.1">
          {{ item.unit }}
        </div>
      {% endfor %}
      <div class="mt-2">
        <button type="button" class="btn btn-sm btn-outline-secondary" id="add-base">+ Add Ingredient</button>
      </div>
    </div>

    <hr>

    <h6>Modifiers</h6>
    <div class="row">
      {% for mod in all_modifiers %}
        <div class="col-6 col-md-4">
          <div class="form-check">
            <input 
              class="form-check-input" 
              type="checkbox" 
              name="modifiers" 
              value="{{ mod.id }}"
              {% if mod in product_modifiers %}checked{% endif %}
            >
            <label class="form-check-label">
              {{ mod.name }} ({{ mod.get_type_display }})
            </label>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="modal-footer mt-3">
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      <button type="submit" class="btn btn-primary">Save Recipe</button>
    </div>
  </form>
</div>
