<div class="p-4">
  <div class="flex justify-between items-center mb-3">
    <h2 class="text-xl font-semibold">Edit Recipe: {{ product.name }}</h2>
    <button
      class="text-gray-500 hover:text-gray-800"
      onclick="closeRecipeModal()"
    >
      âœ•
    </button>
  </div>

  <form hx-post="{% url 'edit_recipe' product.id %}" hx-target="#recipe-modal-content" hx-swap="outerHTML">
    {% csrf_token %}

    <h3 class="font-semibold mb-2">Ingredients</h3>
    <div class="mb-4">
      {% for item in recipe_items %}
      <div class="flex items-center mb-1">
        <div class="flex-1">{{ item.ingredient.name }}</div>
        <div class="w-24">
          <input type="number" name="quantity_{{ item.id }}" value="{{ item.quantity }}" step="0.01" class="w-full border rounded p-1 text-right">
        </div>
        <div class="ml-2">{{ item.unit }}</div>
      </div>
      {% empty %}
      <p class="text-gray-500">No ingredients yet.</p>
      {% endfor %}
    </div>

    <h3 class="font-semibold mb-2">Modifiers</h3>
    <div class="max-h-40 overflow-y-auto mb-4 border p-2 rounded">
      {% for mod in product_modifiers %}
      <label class="flex items-center space-x-2 mb-1">
	<input type="checkbox" name="modifier_{{ mod.id }}" {% if mod.id in selected_modifiers %}checked{% endif %}>
	<span>{{ mod.name }} ({{ mod.get_type_display }})</span>
      </label>
      {% endfor %}
    </div>

    <div class="flex justify-end space-x-2">
      <button type="button" class="px-4 py-2 bg-gray-200 rounded" onclick="closeRecipeModal()">Cancel</button>
      <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save</button>
    </div>
  </form>
</div>
