<div id="all-ingredients-table">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=name&direction={{ toggle_directions.name }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Name {% if sort_indicators.name %}<span>{{ sort_indicators.name }}</span>{% endif %}
                    </button>
                </th>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=category&direction={{ toggle_directions.category }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Category {% if sort_indicators.category %}<span>{{ sort_indicators.category }}</span>{% endif %}
                    </button>
                </th>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=current_stock&direction={{ toggle_directions.current_stock }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Current Stock {% if sort_indicators.current_stock %}<span>{{ sort_indicators.current_stock }}</span>{% endif %}
                    </button>
                </th>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=case_size&direction={{ toggle_directions.case_size }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Case Size {% if sort_indicators.case_size %}<span>{{ sort_indicators.case_size }}</span>{% endif %}
                    </button>
                </th>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=reorder_point&direction={{ toggle_directions.reorder_point }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Reorder Point {% if sort_indicators.reorder_point %}<span>{{ sort_indicators.reorder_point }}</span>{% endif %}
                    </button>
                </th>
                <th>
                    <button type="button" class="btn btn-link p-0 text-decoration-none"
                            hx-get="{% url 'inventory_all_ingredients_partial' %}?sort=avg_cost&direction={{ toggle_directions.avg_cost }}{% if search_query %}&q={{ search_query|urlencode }}{% endif %}{% if active_type %}&type={{ active_type }}{% endif %}"
                            hx-target="#all-ingredients-table" hx-swap="innerHTML">
                        Avg Cost {% if sort_indicators.avg_cost %}<span>{{ sort_indicators.avg_cost }}</span>{% endif %}
                    </button>
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for i in all_ingredients %}
            <tr id="ingredient-{{ i.id }}">
                <td>{{ i.name }}</td>
                <td>{{ i.type.name|default:"â€“" }}</td>
                <td><input type="number" name="current_stock" value="{{ i.current_stock }}"
                        class="form-control form-control-sm" step="0.001"></td>
                <td><input type="number" name="case_size" value="{{ i.case_size }}"
                        class="form-control form-control-sm"></td>
                <td><input type="number" name="reorder_point" value="{{ i.reorder_point }}"
                        class="form-control form-control-sm" step="0.001"></td>
                <td><input type="number" name="average_cost_per_unit" value="{{ i.average_cost_per_unit }}"
                        class="form-control form-control-sm" step="0.000001"></td>
                <td class="text-nowrap">
                    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                    <button class="btn btn-sm btn-outline-primary" hx-post="{% url 'add_case' i.id %}"
                        hx-target="#ingredient-{{ i.id }}" hx-swap="outerHTML">
                        âž• Add Case
                    </button>
                    <button class="btn btn-sm btn-success" hx-post="{% url 'update_ingredient' i.id %}" hx-target="#ingredient-{{ i.id }}"
                        hx-swap="outerHTML" hx-include="closest tr">
                        ðŸ’¾ Update
                    </button>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-muted text-center">No ingredients found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
